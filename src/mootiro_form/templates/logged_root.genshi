<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip=''>
<?python
    from mootiro_form import __appname__ as appname
    request.page_deps.package('jquery.ui')
    request.page_deps.package('jquery.tmpl')
    request.page_deps.stylesheet('forms_list')
    request.page_deps.onload('''
        init_forms_list('{0}');
        update_forms_list({1});
    '''.format(url_root, forms_data))
    request.page_deps.onload('''
        init_categories_list('{0}');
        update_categories_list({1});
        '''.format(url_root, categories_data))
        
    
    
?>
<py:def function="head_content()">
  <script type='text/javascript'
           src="${static_url('mootiro_form:static/js/forms_list.js')}" />
  <script type='text/javascript'
           src="${static_url('mootiro_form:static/js/categories_list.js')}" />
</py:def>
  <py:def function="content()">
    <div id="create_form">
      <a href="${url('form', action='edit', id='new')}">Create a new form</a>
    </div>
    <div id="confirm-deletion" style="display: none">
        Do you really want to delete the form <span id="form-name" />?
    </div>
    <div id="no-form-message">
        You don't have any forms yet.
    </div>
    <table>
        <thead>
            <th>Form Name</th>
            <th></th>
        </thead>
        <tbody id="forms_list">
        </tbody>
    </table>
    <script id="form_tr" type="text/x-jquery-tmpl">
        <tr>
            <td class="form_name">
                <input id="fname-input-$${form_id}" size="" style="display: none;" name="form_name" value="$${form_name}"/>
                <span id="fname-$${form_id}">$${form_name}</span>
            </td>
            <td>
                <span id="edit-form-$${form_id}">Edit</span>
                <span id="delete-form-$${form_id}">
                    Delete
                </span>
            </td>
        </tr>
    </script>
   <div id="create_category">
      <a href="${url('category', action='edit', id='new')}">Create a new category</a>
    </div>
    <div id="confirm-category-deletion" style="display: none">
        Do you really want to delete the category <span id="category-name" />?
    </div>
    <div id="no-category-message">
        You don't have any categories yet.
    </div>
 
<!--    <div id="categories_list">
      <ul>
      </ul>
    </div>
    <script id="category_tr" type="text/x-jquery-tmpl">
    <li>
      <span>$${category_id} - $${category_name}</span>
      <span id="edit-category-$${category_id}">Edit</span>
      <span id="delete-category-$${category_id}">Delete</span>
      FORMS LIST
    </li>
   </script> -->

     <table>
        <thead>
            <th>Category Name</th>
            <th></th>
        </thead>
        <tbody id="categories_list">
        </tbody>
    </table>
   <script id="category_tr" type="text/x-jquery-tmpl">
        <tr>
            <td class="category_name">
                <input id="cname-input-$${category_id}" size=""
                style="display:none;" name="category_name" value="$${category_name}"/>
                <span id="cname-$${category_id}">$${category_name}</span>
            </td>
            <td>
                <span id="edit-category-$${category_id}">Edit</span>
                <span id="delete-category-$${category_id}">
                    Delete
                </span>
            </td>
        </tr>
    </script>

  </py:def>
  <xi:include href="master_cover.genshi" />
</html>
