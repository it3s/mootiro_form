<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip=''>
<?python
    from mootiro_form import __appname__ as appname
    request.page_deps.package('jquery.ui')
    request.page_deps.package('jquery.tmpl')
    request.page_deps.onload('''
        init_forms_list('{0}');
        update_forms_list({1});
    '''.format(url_root, forms_data))
?>
<py:def function="head_content()">
  <script type='text/javascript'
           src="${static_url('mootiro_form:static/js/forms_list.js')}" />
</py:def>
  <py:def function="content()">
    <div id="create_form">
      <a href="${url('form', action='edit', id='new')}">Create a new form</a>
    </div>
    <div id="confirm-deletion" style="display: none">
        Do you really want to delete the form <span id="form-name" />?
    </div>
    <div id="no-form-message">
        You don't have any forms yet.
    </div>
    <table>
        <thead>
            <th>Form Name</th>
            <th></th>
        </thead>
        <tbody id="forms_list">
        </tbody>
    </table>
    <script id="form_tr" type="text/x-jquery-tmpl">
        <tr>
            <td>
                <input id="fname-input-$${form_id}" style="display: none;" name="form_name" value="$${form_name}"/>
                <span id="fname-$${form_id}">$${form_name}</span>
            </td>
            <td>
                <span id="delete-form-$${form_id}">
                    Delete
                </span>
            </td>
        </tr>
    </script>
  </py:def>
  <xi:include href="master_cover.genshi" />
</html>
