<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip=''>
<?python
    from mootiro_form import __appname__ as appname
    request.page_deps.package('deform')
    request.page_deps.package('jquery.ui')
    request.page_deps.lib('jquery.tmpl')
    request.page_deps.stylesheet('form_answers')
    request.page_deps.lib('form_entry')
    request.page_deps.onload('''
        url_root = '%s';
        $(function () {
            $('#formEntriesTable tr td:nth-child(2n)').toggleClass('even');
            $('.viewButton').hover(
                    function () {
                        $(this).attr('src', route_url('root') + 'static/img/icons-root/viewHover.png');
                    },
                    function () {
                        $(this).attr('src', route_url('root') + 'static/img/icons-root/view.png');
                    });
            $('.exportSymbol').hover(
                    function () {
                        $(this).attr('src', route_url('root') + 
                        'static/img/icons-answers/exportOrange.png');
                    },
                    function () {
                        $(this).attr('src', route_url('root') +
                        'static/img/icons-answers/exportDark.png');
                    });
            $('.deleteEntryButton').hover(
                function () {
                    $(this).attr('src', route_url('root') + 
                    'static/img/icons-answers/deleteOrange.png');
                    },
                function () {
                    $(this).attr('src', route_url('root') +
                    'static/img/icons-answers/delete.png');
                });
            $('#backButton').hover(
                function () {
                    $(this).toggleClass('ButtonHover');
                }
            );
            $('#exportButton').hover(
                function () {
                    $(this).toggleClass('ButtonHover');
                }
            );
        });
    ''' % url_root)
?>

  <py:def function="content()">
    <div id="formAnswers">
        <div id="answersTop">
            <span id="answersTitle">Entries</span>
            <div class="Button" id="backButton">
                <a href="${url('root')}">
                <img id="Arrow" alt="go back" 
                src="${static_url('mootiro_form:static/img/icons-answers/leftArrow.png')}" />
                Back to your forms</a>
            </div>
            <div class="Button" id="exportButton">
                <a href="/form/export/${form_id}">
                   <img title="Export" id="exportSymbol" alt="export"
                   src="${static_url('mootiro_form:static/img/icons-answers/export.png')}" />
                   Export</a>
            </div>
        </div>
        <div id="deleteEntryBox" style="display: none">
          Do you really want to delete the entry? This action cannot be undone
        </div>
        <div id="entryBox" title="${form.name}" style="display: none;">
          <div id="entryControls" py:if='len(entries)>1'>
            <button type="button" id="previousButton" class="Button">
              <img id="Arrow" alt="go back"
              src="${static_url('mootiro_form:static/img/icons-answers/leftArrowSmall.png')}" />
              Previous
            </button>
            <select id="entryNumber" class="Select">
              <option py:for="entry in entries"
                onclick="get_entry_data(${entry.id})();"
                value="${entry.entry_number}">
                Entry #${entry.entry_number}
              </option>
            </select>
            <button type="button" id="nextButton" class="Button">Next
              <img id="Arrow" alt="go forward"
              src="${static_url('mootiro_form:static/img/icons-answers/rightArrowSmall.png')}" />
            </button>
          </div>
          <p />
          <div id="entryData"/>
        </div>
        <table id="formEntriesTable">
            <thead>
                <tr>
                    <th>entry number</th>
                    <th>date</th>
                    <th>view</th>
                    <th>export</th>
                    <th>delete</th>
                </tr>
            </thead>
            <tbody>
                <tr py:for="entry in entries" id="entry_${entry.id}">
                    <td>
                        ${entry.entry_number}
                    </td>
                    <td>
                        ${unicode(entry.created)[:16]}
                    </td>
                    <td>
                        <img class="viewButton" title="view" alt="view" src="${static_url('mootiro_form:static/img/icons-root/view.png')}" id="view-answer-${entry.id}" onclick="get_entry_data(${entry.id})();"/>
                    </td>
                    <td>
                        <a href="/entry/export/${entry.id}">
                        <img title="Export" class="exportSymbol"
                        id="exportSymbolDark" alt="export"
                        src="${static_url('mootiro_form:static/img/icons-answers/exportDark.png')}" />
                        </a>
                    </td>
                    <td>
                        <a href="#">
                        <img title="Delete" alt="delete"
                        src="${static_url('mootiro_form:static/img/icons-answers/delete.png')}"
                        class="deleteEntryButton"
                        onclick="delete_entry(${entry.id});"/>
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
  </py:def>
  <xi:include href="master_cover.genshi" />

</html>
