<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip=''>
<?python
request.page_deps.lib('infieldlabel')
request.page_deps.onload('''
$(function() {
  $('#header_links').hover(function() {
    $(this).toggleClass('menu-active');
  });
  $('.hideLabel').inFieldLabels();
});
''')
?>
<div py:def="login_box()">
  <form py:if="not request.user"
        id='login' method="POST" enctype='multipart/form-data'
        action="${url('user', action='login')}">
    <div style="position: relative;">
      <label class="hideLabel" for="login_email">${_('email')}</label>
      <input id="login_email" type="text" name="login_email" />
    </div>
    <div style="position: relative;">
      <label class="hideLabel" for="login_pass">${_('password')}</label>
      <input id="login_pass" type="password" name="login_pass" />
    </div>
    <input type="submit" value="Log in"/><br/>

    <py:if test="request.GET.get('login_error')">
      <div id="login_error">Wrong username or password</div>
      <style type="text/css">
        form#login input[type=text], form#login input[type=password]
          {border: 1px solid red;}
        form#login #login_error {
          color: red;
          padding: 0;
        }
      </style>
    </py:if>

    <a href="${url('user', action='send_recover_mail')}">${_('Forgot your password?')}</a><br/>
    <a href="${url('user', action='new')}" title='Create an account'>${_('Sign up')}</a>
  </form>

  <py:if test="request.user">
    <ul>
      <li class="title"><a href="#">$request.user.nickname</a></li>
      <li>
        <form id="logout" method="post" action="${url('user', action='logout')}">
          <a href="#" onclick="$$('form#logout').submit()">Log out</a>
        </form>
      </li>
    </ul>
  </py:if>

</div>
</html>
