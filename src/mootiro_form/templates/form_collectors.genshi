<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip=''>
<?python
pd = request.page_deps
pd.stylesheet('list')
pd.lib('jquery.tmpl')
pd.lib('js_url')
# pd.lib('jquery-json')
pd.lib('datetimepicker')
pd.lib('date')
pd.package('jquery.ui')
?>

<py:def function="logged_head()">
  <link rel="stylesheet" type="text/css"
    href="${static_url('mootiro_form:static/css/collectors_list.css')}" />
</py:def>

<py:def function="content()">
  <div id="base">
    <div id="top">
      <h1 class="title">Collectors for <span style="font-style: italic;"
        py:content="form.name[:30]+'...' if len(form.name) > 30 else form.name" />
      </h1>
      <ul class="menu">
        <li>
          <a href="${url('root')}">
            <img src="${static_url('mootiro_form:static/img/icons-answers/leftArrow.png')}" />
            Back to my forms
          </a>
        </li>
        <li>
          <a href="${url('form', action='edit', id=form.id)}"> Edit form</a>
        </li>
      </ul>
    </div>
    <div id="middle">
      
      <!-- Collectors: menu, float dialogs and tabs -->
      <ul id="collectorsMenu">
        <li><img alt="New public link collector" id='btnNewPublicLink'
                 src="${static_url('mootiro_form:static/img/icons-collectors/public_link.png')}"
        /></li>
        <li><img alt="New external website code collector" id='btnCopyCode'
                 src="${static_url('mootiro_form:static/img/icons-collectors/website_code.png')}"
        /></li>
      </ul>
      
      <!-- Public Link Collector -->
      <div id="publicLinkDialog"
        class="Dialog" style="display: none;">
        <form id="publicLinkForm" method="POST">
          <ul class="menu">
            <li id="pl_tab-PublicLink">
              <a href="#pl_panel-PublicLink">1. Public Link</a></li>
            <li id="pl_tab-Settings">
              <a href="#pl_panel-Settings">2. Settings</a></li>
            <li id="pl_tab-Restrictions">
              <a href="#pl_panel-Restrictions">3. Restrictions</a></li>
          </ul>
          <div id="pl_panel-PublicLink" class='Panel'>
            <ul>
              <li>
                <label for='pl_name'>Name</label>
                <input type="text" id="pl_name" name='name' />
              </li>
              <li>
                <label for='pl_url'>
                  Copy, paste &amp; e-mail the web link below to your
                  respondents.</label><br />
                <input type="text" id="pl_url" readonly="readonly" />
              </li>
              <li>
                <label for='pl_link'>
                  Copy and paste the HTML code below to add your web link to any
                  webpage.</label><br />
                <input id="pl_link" type="text" readonly="readonly" />
              </li>
            </ul>
          </div>
          <div id="pl_panel-Settings" class='Panel'>
            On completion
            <ul>
              <li>
                <input type="radio" name="on_completion" value='msg' />
                Display thank you page<br />
                <div class="offset">
                  <label for='pl_thanks_message'>Message</label><br />
                  <textarea id="pl_thanks_message" name="thanks_message"></textarea>
                </div>
              </li>
              <li>
                <input type="radio" name="on_completion" value='url' id="ocaUrl" />
                <label for='ocaUrl'>Redirect to custom URL</label><br />
                <div class="offset">
                  <label for="pl_thanks_url">URL:</label>
                  <input type="text" name='thanks_url' id="pl_thanks_url" />
                </div>
              </li>
            </ul>
          </div>
          <div id="pl_panel-Restrictions" class='Panel'>
            <input type="checkbox" id="pl_collection_limitation"
                   name="collection_limitation" />
            <label for='pl_collection_limitation'>Limit survey activity</label>
            <table>
              <tr>
                <td>Start date (GMT):
                  <input type="text" id="pl_start_date" name="start_date" />
                  <p class='error dateTextBreak' id='plStartDateError'></p></td>
                <td>End date (GMT):
                  <input type="text" id="pl_end_date" name="end_date" />
                  <p class='error dateTextBreak' id='plEndDateError'></p>
                  <p class='error dateTextBreak' id='plIntervalError'></p></td>
              </tr>
              <tr>
                <td>
                  Clarifying message: <br />
                  <textarea id="pl_message_before_start" name="message_before_start"></textarea>
                </td>
                <td>
                  Clarifying message: <br />
                  <textarea id="pl_message_after_end" name="message_after_end"></textarea>
                </td>
              </tr>
            </table>
          </div>
        </form>
      </div>

      <!-- Website Code Collector -->
      <div id="websiteCodeDialog"
        class="Dialog" style="display: none;">
        <form id="websiteCodeForm" method="POST">
          <ul class="menu">
            <li id="wc_tab-BasicSettings">
              <a href="#wc_panel-BasicSettings">1. Basic Settings</a></li>
            <li id="wc_tab-Code">
              <a href="#wc_panel-Code">2. Code</a></li>
            <li id="wc_tab-AdvancedSettings">
              <a href="#wc_panel-AdvancedSettings">3. Advanced Settings</a></li>
            <li id="wc_tab-Restrictions">
              <a href="#wc_panel-Restrictions">4. Restrictions</a></li>
          </ul>
          <div id="wc_panel-BasicSettings" class='Panel'>
              1. Basic Settings
          </div>
          <div id="wc_panel-Code" class='Panel'>
              2. Code
          </div>
          <div id="wc_panel-AdvancedSettings" class='Panel'>
              3. Advanced Settings
          </div>
          <div id="wc_panel-Restrictions" class='Panel'>
              4. Restrictions
          </div>
        </form>
      </div>

    </div>
  </div>

  <script type='text/javascript'>
    collectors_json = ${Markup(collectors_json)};
  </script>
  <script type='text/javascript'
      src="${static_url('mootiro_form:static/js/collectors_list.js')}" />
  <script type='text/javascript'>
    manager.formId = ${form.id};
  </script>
</py:def>

<xi:include href="master_cover.genshi" />
</html>
