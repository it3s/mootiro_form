<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip=''>
<?python
pd = request.page_deps
pd.stylesheet('list')
pd.lib('jquery.tmpl')
pd.lib('js_url')
# pd.lib('jquery-json')
pd.lib('datetimepicker')
pd.lib('date')
pd.package('jquery.ui')
?>

<py:def function="logged_head()">
  <link rel="stylesheet" type="text/css"
    href="${static_url('mootiro_form:static/css/collectors_list.css')}" />
</py:def>

<py:def function="content()">
  <div id="base">
    <div id="top">
      <h1 class="title">Collectors for <span style="font-style: italic;"
        py:content="form.name[:30]+'...' if len(form.name) > 30 else form.name" />
      </h1>
      <ul class="menu">
        <li>
          <a href="${url('root')}">
            <img src="${static_url('mootiro_form:static/img/icons-answers/leftArrow.png')}" />
            Back to my forms
          </a>
        </li>
        <li>
          <a href="${url('form', action='edit', id=form.id)}"> Edit form</a>
        </li>
      </ul>
    </div>
    <div id="middle">
      
      <!-- Collectors: menu, float dialogs and tabs -->
      <ul id="collectorsMenu">
        <li><img alt="New public link collector" id='btnNewPublicLink'
                 src="${static_url('mootiro_form:static/img/icons-collectors/public_link.png')}"
        /></li>
        <li><img alt="New external website code collector" id='btnNewWebsiteCode'
                 src="${static_url('mootiro_form:static/img/icons-collectors/website_code.png')}"
        /></li>
      </ul>
      
      <!-- Public Link Collector -->
      <div id="CollectorsEditionDialog" class="Dialog" style="display: none;">
        <form id="publicLinkForm" method="POST">

          <ul class="menu"> <!-- TODO: is this class needed? -->
            <!-- Public Link Tabs -->
            <li id="pl_tab-PublicLink" class="tab">
              <a href="#pl_panel-PublicLink">Public Link</a></li>

            <!-- Website Code Tabs -->
            <li id="wc_tab-WebsiteCode" class="tab">
              <a href="#wc_panel-WebsiteCode">Website Code</a></li>

            <!-- Shared Tabs -->
            <li id="shared_tab-Settings" class="tab">
              <a href="#shared_panel-Settings">Settings</a></li>
            <li id="shared_tab-Restrictions" class="tab">
              <a href="#shared_panel-Restrictions">Restrictions</a></li>
          </ul>

          <!-- Public Link Panels -->
          <div id="pl_panel-PublicLink" class='panel'>
            <ul>
              <li>
                <label for='name'>Name</label>
                <input type="text" id="name" name='name' />
              </li>
              <li>
                <label for='pl_url'>
                  Copy, paste &amp; e-mail the web link below to your
                  respondents.</label><br />
                <input type="text" id="pl_url" readonly="readonly" />
              </li>
              <li>
                <label for='pl_link'>
                  Copy and paste the HTML code below to add your web link to any
                  webpage.</label><br />
                <input id="pl_link" type="text" readonly="readonly" />
              </li>
            </ul>
          </div>
          
          <!-- Website Code Panels -->
          <div id="wc_panel-WebsiteCode" class='panel'>
            <ul>
              <li>
                <label for='name'>Name</label>
                <input type="text" id="name" name='name' />
              </li>
              <li id="WebsiteCodeTypes">
                <div id="WebsiteCodeLeft">
                  <h4>Code type</h4>
                  <ul>
                    <li id="wc_type_tab-invitation">
                      <a href="#wc_type_panel-invitation">Invitation pop-up</a></li>
                    <li id="wc_type_tab-survey">
                      <a href="#wc_type_panel-survey">Survey pop-up</a></li>
                    <li id="wc_type_tab-embed">
                      <a href="#wc_type_panel-embed">Embed</a></li>
                    <li id="wc_type_tab-full_page">
                      <a href="#wc_type_panel-full_page">Full page form code</a></li>
                  </ul>
                </div>
                <div id="WebsiteCodeRight">
                  <h4>Copy and paste the code below into your web page.</h4>
                  <div id="wc_type_panel-invitation">
                    <textarea id="wc_invitation" readonly="readonly">Invitation pop-up</textarea>
                    <p>
                      Invitation pop-up Invitation pop-up Invitation pop-up
                      Invitation pop-up Invitation pop-up Invitation pop-up
                      Invitation pop-up Invitation pop-up Invitation pop-up
                    </p>
                  </div>
                  <div id="wc_type_panel-survey">
                    <textarea id="wc_survey" readonly="readonly">Survey pop-up</textarea>
                    <p>
                      Survey pop-up Survey pop-up Survey pop-up Survey pop-up
                      Survey pop-up Survey pop-up Survey pop-up Survey pop-up
                      Survey pop-up Survey pop-up Survey pop-up Survey pop-up
                    </p>
                  </div>
                  <div id="wc_type_panel-embed" readonly="readonly">
                    <textarea id="wc_embed">Embed</textarea>
                    <p>
                      Embed Embed Embed Embed Embed Embed Embed Embed Embed
                      Embed Embed Embed Embed Embed Embed Embed Embed Embed
                      Embed Embed Embed Embed Embed Embed Embed Embed Embed
                    </p>
                  </div>
                  <div id="wc_type_panel-full_page">
                    <textarea id="wc_full_page" readonly="readonly">Full page form code</textarea>
                    <p>
                      Full page form code Full page form code Full page form code
                      Full page form code Full page form code Full page form code
                      Full page form code Full page form code Full page form code
                    </p>
                  </div>
                </div>
              </li>
              <li>
                <input type="checkbox" id="wc_hide_survey" name="wc_hide_survey" />
                <label for="wc_hide_survey">Hide survey, once it's completed or closed.</label>
              </li>
            </ul>
          </div>

          <!-- Shared Panels -->
          <div id="shared_panel-Settings" class='panel'>
            On completion
            <ul>
              <li>
                <input type="radio" name="on_completion" value='msg' />
                Display thank you page<br />
                <div class="offset">
                  <label for='thanks_message'>Message</label><br />
                  <textarea id="thanks_message" name="thanks_message"></textarea>
                </div>
              </li>
              <li>
                <input type="radio" name="on_completion" value='url' id="ocaUrl" />
                <label for='ocaUrl'>Redirect to custom URL</label><br />
                <div class="offset">
                  <label for="thanks_url">URL:</label>
                  <input type="text" name='thanks_url' id="thanks_url" />
                </div>
              </li>
            </ul>
          </div>

          <div id="shared_panel-Restrictions" class='panel'>
            <input type="checkbox" id="limit_by_date" name="limit_by_date" />
            <label for='limit_by_date'>Deactivate by date</label>
            <table>
              <tr>
                <td>Start date (GMT):
                  <input type="text" id="start_date" name="start_date" />
                  <p class='error dateTextBreak' id='StartDateError'></p></td>
                <td>End date (GMT):
                  <input type="text" id="end_date" name="end_date" />
                  <p class='error dateTextBreak' id='EndDateError'></p>
                  <p class='error dateTextBreak' id='IntervalError'></p></td>
              </tr>
              <tr>
                <td>
                  Clarifying message: <br />
                  <textarea id="message_before_start" name="message_before_start"></textarea>
                </td>
                <td>
                  Clarifying message: <br />
                  <textarea id="message_after_end" name="message_after_end"></textarea>
                </td>
              </tr>
            </table>
          </div>
          
        </form>
      </div>

    </div>
  </div>

  <script type='text/javascript'>
    collectors_json = ${Markup(collectors_json)};
  </script>
  <script type='text/javascript'
      src="${static_url('mootiro_form:static/js/collectors_list.js')}" />
  <script type='text/javascript'>
    manager.formId = ${form.id};
  </script>
</py:def>

<xi:include href="master_cover.genshi" />
</html>
