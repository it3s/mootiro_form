<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip=''>
<?python
pd = request.page_deps
pd.stylesheet('list')
pd.lib('jquery.tmpl')
pd.lib('jquery-json')
pd.lib('datetimepicker')
pd.lib('date')
pd.package('jquery.ui')
?>

<py:def function="logged_head()">
  <link rel="stylesheet" type="text/css"
       href="${static_url('mootiro_form:static/css/collectors_list.css')}" />
</py:def>

<py:def function="head_content()">
</py:def>

<py:def function="content()">
  <div id="base">
    <div id="top">
      <h1 class="title">Collectors for <span style="font-style: italic;"
        py:content="form.name[:30]+'...' if len(form.name) > 30 else form.name" />
      </h1>
      <ul class="menu">
        <li>
          <a href="${url('root')}">
            <img src="${static_url('mootiro_form:static/img/icons-answers/leftArrow.png')}" />
            Back to my forms
          </a>
        </li>
        <li>
          <a href="${url('form', action='edit', id=form.id)}"> Edit form</a>
        </li>
      </ul>
    </div>
    <div id="middle">
      <!-- Collectors: menu, float windows and tabs -->
      <ul id="collectorsMenu">
        <li><img alt="New public link collector" id='btnNewPublicLink'
                 src="${static_url('mootiro_form:static/img/icons-collectors/public_link.png')}"
        /></li>
        <li><img alt="New external html code collector" id='btnCopyCode'
                 src="${static_url('mootiro_form:static/img/icons-collectors/html_code.png')}"
        /></li>
      </ul>
      <!-- Public Link Collector -->
      <div id="publicLinkWindow" style="display: none;">
        <form id="publicLinkForm" method="POST">
          <ul class="ui-tabs-nav">
            <li id="TabPublicLink">
              <a href="#PanelPublicLink">Public Link</a></li>
            <li id="TabSettings">
              <a href="#PanelSettings">Settings</a></li>
            <li id="TabRestrictions">
              <a href="#PanelRestrictions">Restrictions</a></li>
          </ul>
          <div id="PanelPublicLink" class='ui-tabs-panel'>
            <ul>
              <li>
                <label>
                  Name
                  <input type="text" id="pl_name" name='name' value="Public Link X"/>
                </label>
              </li>
              <li>
                <label>
                  Copy, paste &amp; e-mail the web link below to your
                  respondents.<br />
                  <input type="text" id="pl_url" readonly="readonly"
                    value="link_with_slug"/>
                </label>
              </li>
              <li>
                <label>
                  Copy and paste the HTML code below to add your web link to any
                  webpage.<br />
                  <input id="pl_link" type="text" readonly="readonly"
                    value="a href='link_with_slug'  Public Link X  /a" />
                </label>
              </li>
            </ul>
          </div>
          <div id="PanelSettings" class='ui-tabs-panel'>
            On completion
            <ul>
              <li>
                <input type="radio" name="on_completion_action" value='msg' />
                Display thank you page<br />
                Message<br />
                <textarea id="pl_thanks_message"
                    name="thanks_message">Thanks for filling in my form!</textarea>
              </li>
              <li>
                <input type="radio" name="on_completion_action" value='url' id="ocaUrl" />
                <label for='ocaUrl'>Redirect to custom URL</label><br />
                <label for="pl_thanks_url">URL:</label>
                <input type="text" name='thanks_url' id="pl_thanks_url" value="" />
              </li>
            </ul>
          </div>
          <div id="PanelRestrictions" class='ui-tabs-panel'>
            <input type="checkbox" id="pl_limit_by_date" name="limit_by_date" />
            <label for='pl_limit_by_date'>Limit survey activity</label>
            <table>
              <tr>
                <td>Start date:
                  <input type="text" id="pl_start_date" name="start_date" /></td>
                <td>End date:
                  <input type="text" id="pl_end_date" name="end_date" /></td>
              </tr>
              <tr>
                <td>
                  Clarifying message: <br />
                  <textarea id="pl_message_before_start" name="message_before_start"></textarea>
                </td>
                <td>
                  Clarifying message: <br />
                  <textarea id="pl_message_after_end" name="message_after_end"></textarea>
                </td>
              </tr>
            </table>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script id="collectors_template" type="text/x-jquery-tmpl">
    <div class="EmptyListMessage" style="display: none">
      You are not collecting responses to this form yet.<br />
      Create one clicking on one of the buttons above.
    </div>

    <table id="CollectorsListTable" class="ListTable">
      <thead>
        <th class="CollectorName">name</th>
        <th>entries</th>
        <th>start date</th>
        <th>end date</th>
        <th>edit</th>
        <th>copy</th>
        <th>delete</th>
      </thead>
      <tbody id="collectors_rows">
      </tbody>
    </table>
  </script>

  <script id="collectors_rows_template" type="text/x-jquery-tmpl">
    <tr>
      <td class="CollectorName">1</td>
      <td>2</td>
      <td>3</td>
      <td>4</td>
      <td>5</td>
      <td>6</td>
      <td>7</td>
    </tr>
    <tr>
      <td class="CollectorName">1</td>
      <td>2</td>
      <td>3</td>
      <td>4</td>
      <td>5</td>
      <td>6</td>
      <td>7</td>
    </tr>
  </script>
  <script type='text/javascript'
      src="${static_url('mootiro_form:static/js/collectors_list.js')}" />
</py:def>

<xi:include href="master_cover.genshi" />
</html>
