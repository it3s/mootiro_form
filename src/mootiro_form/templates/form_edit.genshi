<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip=''>

<?python
pd = request.page_deps
pd.package('deform')
# pd.package('jquery.ui')  # for the tabs
pd.onload("setupTabs('.ui-tabs-nav', '.ui-tabs-panel');")
pd.onload('deform.load();')
pd.onload("setupCopyValue('#deformField1', '#DisplayTitle', 'Form Title');")
pd.stylesheet('form_edit')
icon_url = lambda path: static_url('mootiro_form:static/img/icons-tabs/' + path)
?>

<py:def function="logged_head()">
</py:def>

<py:def function="content()">
  <div id="LeftCol">
    <ul class="ui-tabs-nav">
      <li><a href='#TabForm' title='Form properties'><img alt='Form'
             src="${icon_url('formSettings.png')}" /></a></li>
      <li><a href='#TabVisual' title='Visual properties'><img alt='Visual'
             src="${icon_url('visual.png')}" /></a></li>
      <li><a href='#TabAdd' title='Add field'><img alt='Add field'
             src="${icon_url('addField.png')}" /></a></li>
      <li><a href='#TabEdit' title='Edit field'><img alt='Edit field'
             src="${icon_url('editField.png')}" /></a></li>
      <li><a href='#TabPublish'>Publish</a></li>
    </ul>
    <form id='LeftForm' method="post" action="$action">
      <div id='TabForm' class="ui-tabs-panel">
        ${Markup(dform)}
      </div>
      <div id='TabVisual' class="ui-tabs-panel">
        TODO: Visual editing here
      </div>
      <div id='TabAdd' class="ui-tabs-panel">
        <div class='Pad'>
          <p class='ShortHelp'>Click on a field to add it to the end of
            the form, or drag it to the proper position on the right.</p>
        </div>
        <hr />
        <h3>Text</h3>
        <hr />
        <h3>Options</h3>
        <hr />
      </div>
      <div id='TabEdit' class="ui-tabs-panel">
        TODO: Field editing here.
      </div>
      <div id='TabPublish' class='ui-tabs-panel'>
          TODO: The Publish panel.
      </div>
      <div id="btnSend"><input type="submit" value="Save"
           title="Save your alterations to this form" /></div>
    </form>
    <script src="${static_url('mootiro_form:static/js/form_edit.js')}" />
  </div>

  <div id='RightCol'>
    <div id="FormDisplay">
      <div id='YourLogo'>Your logo here</div>
      <h1 id="DisplayTitle">Form Title</h1>
      <div id="FormDescription">Public description of your form</div>
      <!--! <div py:for="field in form.fields">
        <div>
          <label>${field.name}</label>
          [render field here]
          <div style="clear: both;"></div>
        </div>
      </div> -->
      <p id="submitButton">
        <input id="submit" name="submit" type="submit" value="Submit" />
      </p>
    </div>
  </div>
</py:def>

<xi:include href="master_logged.genshi" />
</html>
